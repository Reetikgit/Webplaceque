<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
	<title>placeQue - Smart Placement System</title>
    <link rel="icon" href="images/logo23.png" type="image/png" sizes="16x16"> 
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="css/main.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/color.css">
    <link rel="stylesheet" href="css/responsive.css">

</head>
<script>
		
	$(document).ready(function(){
	
	$('#navigation').load("commonNavigation.html");
        $('#footerCommon').load("footerCommon.html");
	$('#commonProfile').load("commonProfile.html");
	$('#profileTask').load("profileTask.html");


});
</script>
<body>
<!--<div class="se-pre-con"></div>-->
<div class="theme-layout">
	<div id="navigation"></div>
	<section id="commonProfile">

	</section><!-- top area -->
	
	<section>
		<div class="gap gray-bg">
			<div class="container-fluid">
				<div class="row">
					<div class="col-lg-12">
						<div class="row" id="page-contents">
							<div class="col-lg-3">
								<aside class="sidebar static" id="profileTask">
																		
								</aside>
							</div><!-- sidebar -->
							
							<div class="col-lg-6">
								<div class="alert alert-warning" role="alert" id="alert1">
									You will not be allowed  <a class="alert-link">to access all the features of app/web</a> unless and until your details are verified by the college.
								  </div>
								<div class="central-meta">
									
								
									<div class="editing-info">
										<h5 class="f-title"><i class="ti-lock"></i>Change Password</h5>
										
										<form method="post">
											<div class="form-group">	
											<input type="password" id="newPass" required="required"/>
											<label class="control-label" for="input">New password</label><i class="mtrl-select"></i>
											</div>
											<div class="form-group">	
											<input type="password" id="cnew" i required="required"/>
											<label class="control-label" for="input">Confirm password</label><i class="mtrl-select"></i>
											</div>
											<div class="form-group">	
											<input type="password" id="old" required="required"/>
											<label class="control-label" for="input">Current password</label><i class="mtrl-select"></i>
											</div>
											<p id="errorText" style="color: red;"></p>
											<p id="successText" style="color: green;"></p>
											<a class="forgot-pwd underline" title="" href="#">Forgot Password?</a>

											<div class="submit-btns">
												<button type="button" class="mtr-btn"><span>Cancel</span></button>
												<button type="button" class="mtr-btn"onclick="updatePassword()" ><span>Update</span></button>
											</div>
										</form>
									</div>
								</div>	
							</div><!-- centerl meta -->
							<div class="col-lg-3">
								<aside class="sidebar static">
									<div class="widget">
											<h4 class="widget-title">Your profile</h4>	
											<div class="your-page">
												<figure>
													<a title="" href="#"><img alt=""  style="width:50px;height:50px;object-fit:cover" src="images/resources/friend-avatar9.jpg" id="imgSide"></a>
												</figure>
												<div class="page-meta">
													<a class="underline" title="" href="#" id="username4"></a>
													<span><i class="ti-comment"></i>Messages <em id="messages">9</em></span>
													<span><i class="ti-bell"></i>Notifications <em id="notifications">2</em></span>
												</div>
												<div class="page-likes">
													<ul class="nav nav-tabs likes-btn">
														<li class="nav-item"><a data-toggle="tab" href="#link1" class="active">My SGPA</a></li>
														 <!-- <li class="nav-item"><a data-toggle="tab" href="#link2" class="">views</a></li> -->
													</ul>
													<!-- Tab panes -->
													<div class="tab-content">
													  <div id="link1" class="tab-pane active fade show">
														<span id="sgpa">8.84</span>
														 
													</div>
												</div>
											</div>
									</div>
	
								</aside>
							</div>
					
							<!-- sidebar -->
							
						</div>
							
					</div>
				</div>
			</div>
		</div>	
	</section>

<div id="footerCommon"></div>
	<div class="bottombar">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<span class="copyright"><a target="_blank" href="https://www.templateshub.net">placeQue @2021</a></span>
					
				</div>
			</div>
		</div>
	</div>
</div>
	<div class="side-panel">
			<h4 class="panel-title">General Setting</h4>
			<form method="post">
				<div class="setting-row">
					<span>use night mode</span>
					<input type="checkbox" id="nightmode1"/> 
					<label for="nightmode1" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>Notifications</span>
					<input type="checkbox" id="switch22" /> 
					<label for="switch22" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>Notification sound</span>
					<input type="checkbox" id="switch33" /> 
					<label for="switch33" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>My profile</span>
					<input type="checkbox" id="switch44" /> 
					<label for="switch44" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>Show profile</span>
					<input type="checkbox" id="switch55" /> 
					<label for="switch55" data-on-label="ON" data-off-label="OFF"></label>
				</div>
			</form>
			<h4 class="panel-title">Account Setting</h4>
			<form method="post">
				<div class="setting-row">
					<span>Sub users</span>
					<input type="checkbox" id="switch66" /> 
					<label for="switch66" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>personal account</span>
					<input type="checkbox" id="switch77" /> 
					<label for="switch77" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>Business account</span>
					<input type="checkbox" id="switch88" /> 
					<label for="switch88" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>Show me online</span>
					<input type="checkbox" id="switch99" /> 
					<label for="switch99" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>Delete history</span>
					<input type="checkbox" id="switch101" /> 
					<label for="switch101" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>Expose author name</span>
					<input type="checkbox" id="switch111" /> 
					<label for="switch111" data-on-label="ON" data-off-label="OFF"></label>
				</div>
			</form>
		</div><!-- side panel -->		
	



</body>	

<script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.2/firebase.js"></script>
<!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
<script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-analytics.js"></script>

<!-- Add Firebase products that you want to use -->
<script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-firestore.js"></script>

<script>
	var firebaseConfig = {
    apiKey: "AIzaSyBrjKsOT5YXZSYFVOa3PeBi3997XdKJRbw",
    authDomain: "placeque-47156.firebaseapp.com",
    databaseURL: "https://placeque-47156-default-rtdb.firebaseio.com",
    projectId: "placeque-47156",
    storageBucket: "placeque-47156.appspot.com",
    messagingSenderId: "387944466952",
    appId: "1:387944466952:web:3ec6cfefc5682e3431dfbd",
    measurementId: "G-N7RD97TPP5"
};
// Initialize Firebase
firebase.initializeApp(firebaseConfig);
	
	var key= window.localStorage.getItem("user")

	let ref= firebase.database().ref('studentData').child(key)
	var datas;
	ref.on('value', (snapshot) => {
			datas = snapshot.val();
		
	})
	function updatePassword(){
		let old = document.querySelector("#old").value;
		let newPass = document.querySelector("#newPass").value;
		let cnew = document.querySelector("#cnew").value;
		if(old == datas.password){
			if(newPass == cnew){
				
				var user = firebase.auth().currentUser;
				console.log(user.uid)
				user.updatePassword(newPass).then(function() {
					// Update successful.
					updates = {
                    	password : newPass
               		 }
                	firebase.database().ref('studentData').child(user.uid).update(updates);
					document.getElementById("successText").innerHTML="Password Updated Successfully"
					setTimeout(function(){
						document.getElementById("successText").innerHTML="Password Updated Successfully"
					},2500)
					setTimeout(function(){
						document.getElementById("successText").innerHTML=""
					},3000)
				}).catch(function(error) {
					document.getElementById("errorText").innerHTML="Retry Login before changing the password "
});
			}else{
				document.getElementById("errorText").innerHTML = "Confirm Password should be same as password"
				setTimeout(function(){
						document.getElementById("errorText").innerHTML=""
					},2500)
			}
		}else{
			document.getElementById("errorText").innerHTML = "Old Passsword Incorrect"
			setTimeout(function(){
						document.getElementById("errorText").innerHTML=" "
					},2500)
		}
	}
</script>
</html>
