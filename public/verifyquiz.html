<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
	<title>placeQue | HOME </title>
    <link rel="icon" href="images/logo23.png" type="image/png" sizes="16x16"> 
    
    <link rel="stylesheet" href="css/main.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/color.css">
    <link rel="stylesheet" href="css/responsive.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<link rel="stylesheet" href="https://unpkg.com/placeholder-loading/dist/css/placeholder-loading.min.css">
</head>
<style>
	.modal-dialog-full-width {
        width: 100% !important;
        height: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
        max-width:none !important;

    }
	body {
    background-color: #a04c65
}

    .modal-content-full-width  {
        height: auto !important;
        min-height: 100% !important;
        border-radius: 0 !important;
        background-color: #ececec !important 
    }

    .modal-header-full-width  {
        border-bottom: 1px solid #9ea2a2 !important;
    }

    .modal-footer-full-width  {
        border-top: 1px solid #9ea2a2 !important;
    }
	
</style>
<script>
		
		$(document).ready(function(){
		
		$('#navigation').load("commonNavigation.html");
        $('#footerCommon').load("footerCommon.html");

 });
</script>
<body >
<!--<div class="se-pre-con"></div>-->
<div class="theme-layout">
	<div id="navigation"></div>
	<section style="background-color:navajowhite !important;">
		<div class="">
			<div class="">
				<div class="row">
					<div class="col-lg-12">
						<div class="row">
							<div class="col-md-12">
								<div class="main-verification-input-wrap">
									<ul>
										<li>Enter the quiz code sent over the registered college mail.</li>
										<li>If somehow, you did not recieve the verification email then <a href="#">raise a query to the placement admin</a></li>
									</ul>
									<div class="main-verification-input fl-wrap">
										<div class="main-verification-input-item"> <input type="text" id="code" value="" placeholder="Enter the verification code"> </div> <button class="main-verification-button" id="verify"  onclick="verifyCode()">Verify Now</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>	
		<br>
	<br>

	</section>
	
	<div id="footerCommon"></div><!-- footer -->
	<div class="bottombar">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<span class="copyright"><a target="_blank" href="https://www.templateshub.net">placeQue @2021</a></span>
					<i><img src="images/credit-cards.png" alt=""></i>
				</div>
			</div>
		</div>
	</div>
</div>
	<div class="side-panel">
			<h4 class="panel-title">General Setting</h4>
			<form method="post">
				<div class="setting-row">
					<span>use night mode</span>
					<input type="checkbox" id="nightmode1"/> 
					<label for="nightmode1" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>Notifications</span>
					<input type="checkbox" id="switch22" /> 
					<label for="switch22" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>Notification sound</span>
					<input type="checkbox" id="switch33" /> 
					<label for="switch33" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>My profile</span>
					<input type="checkbox" id="switch44" /> 
					<label for="switch44" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>Show profile</span>
					<input type="checkbox" id="switch55" /> 
					<label for="switch55" data-on-label="ON" data-off-label="OFF"></label>
				</div>
			</form>
			<h4 class="panel-title">Account Setting</h4>
			<form method="post">
				<div class="setting-row">
					<span>Sub users</span>
					<input type="checkbox" id="switch66" /> 
					<label for="switch66" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>personal account</span>
					<input type="checkbox" id="switch77" /> 
					<label for="switch77" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>Business account</span>
					<input type="checkbox" id="switch88" /> 
					<label for="switch88" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>Show me online</span>
					<input type="checkbox" id="switch99" /> 
					<label for="switch99" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>Delete history</span>
					<input type="checkbox" id="switch101" /> 
					<label for="switch101" data-on-label="ON" data-off-label="OFF"></label>
				</div>
				<div class="setting-row">
					<span>Expose author name</span>
					<input type="checkbox" id="switch111" /> 
					<label for="switch111" data-on-label="ON" data-off-label="OFF"></label>
				</div>
			</form>
		</div><!-- side panel -->		
	
	<!-- <script src="js/main.min.js"></script>
	<script src="js/script.js"></script> -->
	


</body>	
<!-- <script src="js/main.min.js"></script>
<script src="js/script.js"></script> -->

<script>
	function verifyCode(){
		let code=document.getElementById("code").value
		let quizData = firebase.database().ref('quizData')
		let studentData = JSON.parse(window.localStorage.getItem("studentData"))
		let user =window.localStorage.getItem("user")
	
	
       	quizData.on('value',gotData,errData)

        function gotData(data){
			let year= "0"
            let sc= data.val()
			let flag="unset"
			let keys=Object.keys(sc)
			
			for(let i =0;i<keys.length;i++){
				let key = keys[i]
			
				if(studentData[user].quizScores){
			
					for(let p=0;p<studentData[user].quizScores.length;p++){
					
						if(studentData[user].quizScores[p].code==code){
							
							flag =undefined
							break;
						}
					}
					
					if(flag == undefined){

				
						break;
					}
				
						
				}
				if(code == sc[key].info.id ){
					flag  = key	
				}
				
			}
			
			
			if(window.localStorage.getItem("sem")==1 || window.localStorage.getItem("sem")==2){
				year="1"
			}else if (window.localStorage.getItem("sem")==3 || window.localStorage.getItem("sem")==4){
				year="2"
			}else if(window.localStorage.getItem("sem")==5 || window.localStorage.getItem("sem")==6){
				year="3"
			}else{
				year="4"
			}
			
			if(flag && flag != "unset"){
		
				let startTime =sc[flag].info.date + " "+(sc[flag].info.startTime).substring(0,5)
				let endTime =sc[flag].info.date + " "+(sc[flag].info.endTime).substring(0,5)

				var countDownDate = new Date(startTime).getTime();
				var endTiming = new Date(endTime).getTime();
				var now = new Date().getTime();
				
				var timeleft = countDownDate - now;
				var isEnded = endTiming -now;
	
				if(isEnded > 0){
				

					if((sc[flag].info.selectedBranches).includes(window.localStorage.getItem("branch")) && (sc[flag].info.selectedYear).includes(year) ){
						window.localStorage.setItem("quizKey",flag)
						window.localStorage.setItem("quizInstruction",sc[flag].instruction)
						window.localStorage.setItem("quizDetails",JSON.stringify(sc))
						window.location="instructionquiz.html"
					}else{
						document.getElementById("verify").style.backgroundColor="red"

						document.getElementById("verify").innerHTML="Invalid Code"
						setTimeout(function(){
							document.getElementById("verify").style.backgroundColor="#4DB7FE"

							document.getElementById("verify").innerHTML="Verify"
						},3000)
					}
				}else{
				
					document.getElementById("verify").style.backgroundColor="red"

					document.getElementById("verify").innerHTML="Quiz Expired"
					setTimeout(function(){
						document.getElementById("verify").style.backgroundColor="#4DB7FE"

						document.getElementById("verify").innerHTML="Verify"
					},3000)
				}
				
			}else{
				if(flag =="unset"){
					document.getElementById("verify").style.backgroundColor="red"

					document.getElementById("verify").innerHTML="Invalid Code"
					setTimeout(function(){
						document.getElementById("verify").style.backgroundColor="#4DB7FE"

						document.getElementById("verify").innerHTML="Verify"
					},3000)
				}else{
					document.getElementById("verify").style.backgroundColor="red"

					document.getElementById("verify").innerHTML="Quiz already taken"
					setTimeout(function(){
						document.getElementById("verify").style.backgroundColor="#4DB7FE"

						document.getElementById("verify").innerHTML="Verify"
					},3000)
				}
			
			}
			
			

        }
		function errData(){

		}
	}
</script>
</html>